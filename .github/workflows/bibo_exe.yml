name: bibo_exe

on:
  schedule:
    - cron: '0 18 * * 1-5' #12MST M-F
#    - cron: '40 18 * * *' #13:50 PM MDT / 19:45 UTC
#    - cron: '00 02 * * *' #2000 - 2127
#    - cron: '10 02 * * *' #2010 - 2149
#    - cron: '20 02 * * *' #2020 - 2150
#    - cron: '00 12 * * *' #0600 - 0618
#    - cron: '10 13 * * *' #0710 - 0747
  workflow_dispatch:

jobs:
  run-bot:
    environment: alpaca_bibo
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install dependencies
        run: |
          pip install -r requirements.txt

      - name: Run bot
        env:
          EMAIL: ${{ secrets.EMAIL }}
          PASSWORD: ${{ secrets.PASSWORD }}
          PAPERACC: ${{ secrets.PAPERACC }}
          LIVEACC: ${{ secrets.LIVEACC }}
          PAPERACCUUID: ${{ secrets.PAPERACCUUID }}
          ACCUUID: ${{ secrets.ACCUUID }}
          API_KEY: ${{ secrets.API_KEY }}
          SECRET_KEY: ${{ secrets.SECRET_KEY }}
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        run: python algorithm/BIBO/main.py
